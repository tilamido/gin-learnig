(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bbs-topic-add"],{"0104":function(n,t,e){var a=e("4fd8");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var i=e("4f06").default;i("ade109e2",a,!0,{sourceMap:!1,shadowMode:!1})},"10eb":function(n,t,e){"use strict";e("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e("d9e2"),e("d401")},"13bf":function(n,t,e){"use strict";e("7a82");var a=e("ee27").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("498a"),e("d81d");var i=a(e("d0ff")),u=a(e("5f58")),o={components:{upimgBox:u.default},data:function(){return{imgsList:[],unLogin:!0,ssuserid:"",uploadUrl:getApp().globalData.backendurl}},onLoad:function(){this.getPage()},methods:{getPage:function(){if(this.ssuserid=getApp().globalData.ssuserid,console.log(getApp().globalData),this.unLogin=getApp().globalData.unLogin,""==this.ssuserid)return!1},callImgList:function(n){console.log(22,n),this.imgsList=(0,i.default)(n)},formSubmit:function(n){console.log(22,n);var t=n.detail.value.content;if(!t||!t.trim())return uni.showToast({title:"发布内容不能为空",icon:"none"}),!1;var e=this.imgsList.map((function(n){return n.imgurl})).join(",");console.log("imagePaths",e),uni.request({url:this.app.apiHost+"/moment/send",method:"POST",data:{user_id:getApp().globalData.ssuserid,content:t,image_paths:e},success:function(n){console.log(111,n),0==n.data.code?uni.showModal({showCancel:!1,content:"发布成功",success:function(n){n.confirm&&uni.redirectTo({url:"/pages/index/index"})}}):uni.showModal({showCancel:!1,content:"发布失败:"+n.data.msg})},fail:function(n){console.log(n)}})}}};t.default=o},1527:function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){}));var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[n.unLogin?e("un-login"):e("v-uni-form",{on:{submit:function(t){arguments[0]=t=n.$handleEvent(t),n.formSubmit.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"textarea-flex"},[e("v-uni-view",{staticClass:"textarea-flex-label"},[n._v("内容")]),e("v-uni-textarea",{staticClass:"textarea-flex-text",attrs:{maxlength:"300",name:"content"}})],1),e("upimg-box",{attrs:{defaultImgsList:[],"upload-url":n.uploadUrl},on:{callParent:function(t){arguments[0]=t=n.$handleEvent(t),n.callImgList.apply(void 0,arguments)}}}),e("v-uni-button",{staticClass:"btn-row-submit",attrs:{"form-type":"submit"}},[n._v("发布")])],1)],1)},i=[]},"1c82":function(n,t,e){"use strict";e("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("d3b7"),e("159b"),e("14d9"),e("a434");var a={name:"upimg-box",props:{defaultImgsList:Array,uploadUrl:{type:String,required:!0}},data:function(){return{imgsList:this.defaultImgsList}},methods:{upImg:function(){var n=this;uni.chooseImage({success:function(t){var e=t.tempFilePaths;e.forEach((function(t){uni.uploadFile({url:n.uploadUrl+"/moment/uploadfile",filePath:t,name:"file",success:function(t){var e=JSON.parse(t.data);0==e.code?(n.imgsList.push({imgurl:n.uploadUrl+e.data}),n.$emit("callParent",n.imgsList)):uni.showToast({title:"上传失败: "+e.msg,icon:"none"})},fail:function(n){console.log("上传错误信息：",n),uni.showToast({title:"上传出错",icon:"none"})}})}))}})},delImg:function(n){this.imgsList.splice(n,1)}}};t.default=a},2706:function(n,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return i})),e.d(t,"a",(function(){}));var a=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",[e("v-uni-view",{staticClass:"upimg-box bg-fff"},[n._l(n.imgsList,(function(t,a){return e("v-uni-view",{key:a,staticClass:"upimg-item"},[e("v-uni-image",{staticClass:"upimg-img",attrs:{src:t.imgurl+"?x-oss-process=image/resize,m_fixed,h_100,w_100"}}),e("v-uni-view",{staticClass:"upimg-del",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.delImg(a)}}})],1)})),e("v-uni-view",{staticClass:"upimg-btn",on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.upImg()}}},[e("i",{staticClass:"upimg-btn-icon"})])],2)],1)},i=[]},2872:function(n,t,e){var a=e("5351");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var i=e("4f06").default;i("6f5e4152",a,!0,{sourceMap:!1,shadowMode:!1})},"2fe7":function(n,t,e){"use strict";var a=e("0104"),i=e.n(a);i.a},4053:function(n,t,e){"use strict";e("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){if(Array.isArray(n))return(0,a.default)(n)};var a=function(n){return n&&n.__esModule?n:{default:n}}(e("b680"))},"4fd8":function(n,t,e){var a=e("24fb");t=a(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 样式保持不变 */",""]),n.exports=t},5351:function(n,t,e){var a=e("24fb");t=a(!1),t.push([n.i,".textarea-flex[data-v-40f58ee6]{height:%?680?%}.textarea-flex-text[data-v-40f58ee6]{width:100%}",""]),n.exports=t},"5aca":function(n,t,e){"use strict";e.r(t);var a=e("13bf"),i=e.n(a);for(var u in a)["default"].indexOf(u)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(u);t["default"]=i.a},"5f58":function(n,t,e){"use strict";e.r(t);var a=e("2706"),i=e("8b1a");for(var u in i)["default"].indexOf(u)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(u);e("2fe7");var o=e("f0c5"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"2d8c8670",null,!1,a["a"],void 0);t["default"]=s.exports},8618:function(n,t,e){"use strict";e.r(t);var a=e("1527"),i=e("5aca");for(var u in i)["default"].indexOf(u)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(u);e("f508");var o=e("f0c5"),s=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"40f58ee6",null,!1,a["a"],void 0);t["default"]=s.exports},"8b1a":function(n,t,e){"use strict";e.r(t);var a=e("1c82"),i=e.n(a);for(var u in a)["default"].indexOf(u)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(u);t["default"]=i.a},a9e0:function(n,t,e){"use strict";e("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)},e("a4d3"),e("e01a"),e("d3b7"),e("d28b"),e("3ca3"),e("ddb0"),e("a630")},d0ff:function(n,t,e){"use strict";e("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return(0,a.default)(n)||(0,i.default)(n)||(0,u.default)(n)||(0,o.default)()};var a=s(e("4053")),i=s(e("a9e0")),u=s(e("dde1")),o=s(e("10eb"));function s(n){return n&&n.__esModule?n:{default:n}}},f508:function(n,t,e){"use strict";var a=e("2872"),i=e.n(a);i.a}}]);