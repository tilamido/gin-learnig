(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bbs-topic-show"],{"16ad":function(t,s,e){"use strict";e.d(s,"b",(function(){return a})),e.d(s,"c",(function(){return i})),e.d(s,"a",(function(){}));var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.pageLoad?e("v-uni-view",[e("v-uni-view",{staticClass:"row-box"},[e("v-uni-view",{staticClass:"d-userbox"},[e("v-uni-image",{staticClass:"d-userbox-head",attrs:{mode:"widthFix",src:t.author.avatar+"?x-oss-process=image/resize,m_fixed,h_100,w_100"}}),e("v-uni-view",{staticClass:"flex-1"},[e("v-uni-view",{staticClass:"d-userbox-nick"},[t._v(t._s(t.author.nickname))]),e("v-uni-view",{staticClass:"d-userbox-follows flex-ai-center"},[e("v-uni-text",{staticClass:"mgr-5"},[t._v("粉丝")]),e("v-uni-text",{staticClass:"cl-num mgr-5 flex-center"},[t._v("0")]),e("v-uni-view",{staticClass:"flex-1"}),e("v-uni-text",{staticClass:"mgr-5"},[t._v("关注")]),e("v-uni-text",{staticClass:"cl-num flex-center"},[t._v("0")])],1)],1)],1)],1),e("v-uni-view",{staticClass:"row-box"},[e("v-uni-view",{staticClass:"d-title"},[t._v(t._s(t.data.title))]),e("v-uni-view",{staticClass:"block"},t._l(t.data.imgList,(function(t,s){return e("v-uni-image",{key:s,staticClass:"wmax",attrs:{src:t.imgurl,mode:"widthFix"}})})),1),e("v-uni-view",{staticClass:"d-content"},[t._v(t._s(t.data.content))]),e("v-uni-view",{staticClass:"flex flex-center mgb-10"},[e("v-uni-view",{staticClass:"btn-love  mgr-10",class:t.islove?"btn-love-active":"",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.loveToggle(t.data._id)}}},[t._v("喜欢")]),e("v-uni-view",{staticClass:"btn-fav mgr-10",class:t.isfav?"btn-fav-active":"",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.favToggle(t.data._id)}}},[t._v("收藏")])],1)],1),e("v-uni-view",{staticClass:"comment-hd"},[t._v("跟帖列表")]),e("cmform",{attrs:{tablename:"bbs-topic",objectid:t.data._id}})],1):t._e()},i=[]},"28bb":function(t,s,e){e("ac1f"),e("00b4"),e("5319"),e("4d63"),e("c607"),e("2c3e"),e("25f0"),Date.prototype.Format=function(t){var s={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var e in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[e]:("00"+s[e]).substr((""+s[e]).length)));return t},t.exports=Date},"4b29":function(t,s,e){"use strict";(function(t){e("7a82");var a=e("ee27").default;Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var i=a(e("56ce")),n={components:{cmform:i.default},data:function(){return{pageLoad:!1,author:{},data:{},id:"",islove:!1,isfav:!1,ssuserid:"",unLogin:!0}},onLoad:function(t){this.id=t.id,this.ssuserid=getApp().globalData.ssuserid,console.log(this.ssuserid),console.log(getApp().globalData),this.unLogin=getApp().globalData.unLogin,this.getPage(),this.addView()},methods:{getPage:function(){var s=this;t.callFunction({name:"bbs_topic",data:{cloudAction:"show",params:{id:this.id}}}).then((function(t){t=t.result.data;s.data=t.data,s.author=t.user,s.pageLoad=!0})),t.callFunction({name:"love",data:{cloudAction:"get",params:{objectid:this.id,tablename:"bbs-topic",ssuserid:this.ssuserid}},success:function(t){console.log("love",t),1==t.result.data?s.islove=!0:s.islove=!1}}),t.callFunction({name:"fav",data:{cloudAction:"get",params:{objectid:this.id,tablename:"bbs-topic",ssuserid:this.ssuserid}},success:function(t){1==t.result.data?s.isfav=!0:s.isfav=!1}})},addView:function(){t.callFunction({name:"bbs_topic",data:{cloudAction:"addView",params:{id:this.id}}}).then((function(t){}))},favToggle:function(s){var e=this;t.callFunction({name:"fav",data:{cloudAction:"toggle",params:{objectid:s,tablename:"bbs-topic",ssuserid:this.ssuserid}},success:function(t){"add"==t.result.data.action?e.isfav=!0:e.isfav=!1},fail:function(t){console.log(t)}})},loveToggle:function(s){console.log(s);var e=this;t.callFunction({name:"love",data:{cloudAction:"toggle",params:{objectid:s,tablename:"bbs-topic",ssuserid:this.ssuserid}},success:function(t){"add"==t.result.data.action?e.islove=!0:e.islove=!1},fail:function(t){console.log(t)}})}}};s.default=n}).call(this,e("a9ff")["default"])},"56ce":function(t,s,e){"use strict";e.r(s);var a=e("7026"),i=e("68a6");for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(s,t,(function(){return i[t]}))}(n);var o=e("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"9dcd8fa8",null,!1,a["a"],void 0);s["default"]=c.exports},"68a6":function(t,s,e){"use strict";e.r(s);var a=e("8790"),i=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(s,t,(function(){return a[t]}))}(n);s["default"]=i.a},"69df":function(t,s,e){"use strict";e.r(s);var a=e("4b29"),i=e.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){e.d(s,t,(function(){return a[t]}))}(n);s["default"]=i.a},7026:function(t,s,e){"use strict";e.d(s,"b",(function(){return a})),e.d(s,"c",(function(){return i})),e.d(s,"a",(function(){}));var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[0==Object.keys(t.list).length?e("div",{staticClass:"emptyData"},[t._v("暂无评论")]):e("div",{staticClass:"comment-list",attrs:{id:"comment-list"}},t._l(t.list,(function(s,a){return e("div",{key:a,staticClass:"comment-item"},[e("v-uni-image",{staticClass:"comment-item-head",attrs:{src:s.user.avatar+""}}),e("div",{staticClass:"flex-1"},[e("v-uni-view",{staticClass:"flex mgb-5"},[e("div",{staticClass:"cl2 f14"},[t._v(t._s(s.user.nickname))]),e("v-uni-view",{staticClass:"flex-1"}),e("div",{staticClass:"f12 cl3"},[t._v(t._s(s.createTime))])],1),e("div",{staticClass:"comment-item-content",attrs:{pid:s.id,title:"回复@"+s.nickname,reply_text:"回复@"+s.nickname}},[t._v(t._s(s.content))])],1)],1)})),0),e("div",{staticClass:"h60"}),e("div",{staticClass:"comment-formbox"},[e("div",{staticClass:"comment-input-btn js-write",class:t.cmBtnClass,on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.cmFormShow()}}},[t._v("写跟帖")]),e("v-uni-form",{staticClass:"comment-formbox-form js-form",class:t.cmFormClass,on:{submit:function(s){arguments[0]=s=t.$handleEvent(s),t.cmFormSubmit.apply(void 0,arguments)}}},[e("div",{staticClass:"none"},[e("v-uni-input",{attrs:{type:"text",name:"tablename",value:t.tablename}}),e("v-uni-input",{attrs:{type:"text",name:"objectid",value:t.objectid}})],1),e("v-uni-textarea",{staticClass:"comment-formbox-textarea",attrs:{name:"content"}}),e("div",{staticClass:"comment-formbox-btns"},[e("v-uni-button",{staticClass:"comment-formbox-bt btn-success  js-submit",attrs:{formType:"submit"}},[t._v("评论")]),e("div",{staticClass:"w60"}),e("div",{staticClass:"comment-formbox-bt js-cancel",on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.cmFormHide()}}},[t._v("取消")])],1)],1)],1)])},i=[]},8790:function(t,s,e){"use strict";(function(t){e("7a82");var a=e("ee27").default;Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;a(e("28bb"));var i={props:{tablename:"",objectid:""},data:function(){return{rscount:0,list:[],cmFormClass:"",cmBtnClass:"",unLogin:!0,ssuserid:""}},created:function(){this.getList(),this.ssuserid=getApp().globalData.ssuserid,console.log(getApp().globalData),this.unLogin=getApp().globalData.unLogin},methods:{getList:function(){var s=this;console.log(this.objectid),t.callFunction({name:"comment",data:{cloudAction:"list",params:{objectid:this.objectid,tablename:this.tablename,start:0,limit:12}},success:function(t){var e=t.result.data;s.list=e.list,console.log(s.list)},fail:function(t){console.log(t)}})},cmFormShow:function(){console.log("show"),this.cmBtnClass="none",this.cmFormClass="flex-col"},cmFormHide:function(){console.log("hide"),this.cmBtnClass="",this.cmFormClass=""},cmFormSubmit:function(s){var e=this,a=s.detail.value;a.userid=this.ssuserid,a.status=0,a.createTime=(new Date).Format("yyyy-MM-dd hh:mm:ss"),t.callFunction({name:"comment",data:{cloudAction:"save",params:a},success:function(t){if(t.result.error)return unis.showToast({title:t.result.message}),!1;e.getList(),e.cmFormHide()}})}}};s.default=i}).call(this,e("a9ff")["default"])},ea36:function(t,s,e){"use strict";e.r(s);var a=e("16ad"),i=e("69df");for(var n in i)["default"].indexOf(n)<0&&function(t){e.d(s,t,(function(){return i[t]}))}(n);var o=e("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"afadaea0",null,!1,a["a"],void 0);s["default"]=c.exports}}]);